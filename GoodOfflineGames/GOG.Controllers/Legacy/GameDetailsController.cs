using System;
using System.Linq;
using System.Collections.Generic;

using GOG.Model;
using GOG.Models.Uris;
using GOG.Interfaces;

namespace GOG.Controllers
{
    public class GameDetailsController : ProductCoreController<GameDetails>
    {
        private IDeserializeDelegate<string> stringDeserializeController;
        private IGameDetailsDownloadsController gameDetailsDownloadsController;
        private ICollection<string> requestedLanguages;

        public GameDetailsController(
            IList<GameDetails> gameDetails,
            IGetStringDelegate getStringDelegate,
            IDeserializeDelegate<string> stringDeserializeController,
            IGameDetailsDownloadsController gameDetailsDownloadsController,
            ICollection<string> requestedLanguages) :
            base(gameDetails, getStringDelegate)
        {
            this.stringDeserializeController = stringDeserializeController;
            this.gameDetailsDownloadsController = gameDetailsDownloadsController;
            this.requestedLanguages = requestedLanguages;

            // TODO: add unit test for this case
            //var data = "{\"title\":\"Trine 3: The Artifacts of Power\",\"backgroundImage\":\"\\/\\/images-1.gog.com\\/3a3f998d2a32d4ff294237f786ac4bf7c3f88df75176b20d6bc7d173fc216987\",\"cdKey\":\"\",\"textInformation\":\"\",\"downloads\":[[\"English\",{\"windows\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/en1installer11\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_en\",\"name\":\"Trine 3: The Artifacts of Power (Part 1 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"33 MB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/en1installer12\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_en\",\"name\":\"Trine 3: The Artifacts of Power (Part 2 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"3.7 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/en1patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/en1patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"41 MB\"}],\"mac\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/en2installer1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__en\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-1)\",\"date\":\"\",\"size\":\"3.3 GB\"}],\"linux\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/en3installer2\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__en\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-2)\",\"date\":\"\",\"size\":\"3.3 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/en3patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/en3patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"33 MB\"}]}],[\"Dansk\",{\"windows\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/da1installer11\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_da\",\"name\":\"Trine 3: The Artifacts of Power (Part 1 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"33 MB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/da1installer12\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_da\",\"name\":\"Trine 3: The Artifacts of Power (Part 2 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"3.7 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/da1patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/da1patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"41 MB\"}],\"mac\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/da2installer1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__da\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-1)\",\"date\":\"\",\"size\":\"3.3 GB\"}],\"linux\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/da3installer2\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__da\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-2)\",\"date\":\"\",\"size\":\"3.3 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/da3patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/da3patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"33 MB\"}]}],[\"Deutsch\",{\"windows\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/de1installer11\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_de\",\"name\":\"Trine 3: The Artifacts of Power (Part 1 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"33 MB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/de1installer12\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_de\",\"name\":\"Trine 3: The Artifacts of Power (Part 2 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"3.7 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/de1patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/de1patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"41 MB\"}],\"mac\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/de2installer1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__de\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-1)\",\"date\":\"\",\"size\":\"3.3 GB\"}],\"linux\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/de3installer2\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__de\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-2)\",\"date\":\"\",\"size\":\"3.3 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/de3patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/de3patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"33 MB\"}]}],[\"espa\\u00f1ol\",{\"windows\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/es1installer11\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_es\",\"name\":\"Trine 3: The Artifacts of Power (Part 1 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"33 MB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/es1installer12\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_es\",\"name\":\"Trine 3: The Artifacts of Power (Part 2 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"3.7 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/es1patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/es1patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"41 MB\"}],\"mac\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/es2installer1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__es\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-1)\",\"date\":\"\",\"size\":\"3.3 GB\"}],\"linux\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/es3installer2\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__es\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-2)\",\"date\":\"\",\"size\":\"3.3 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/es3patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/es3patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"33 MB\"}]}],[\"fran\\u00e7ais\",{\"windows\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/fr1installer11\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_fr\",\"name\":\"Trine 3: The Artifacts of Power (Part 1 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"33 MB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/fr1installer12\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_fr\",\"name\":\"Trine 3: The Artifacts of Power (Part 2 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"3.7 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/fr1patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/fr1patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"41 MB\"}],\"mac\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/fr2installer1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__fr\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-1)\",\"date\":\"\",\"size\":\"3.3 GB\"}],\"linux\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/fr3installer2\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__fr\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-2)\",\"date\":\"\",\"size\":\"3.3 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/fr3patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/fr3patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"33 MB\"}]}],[\"italiano\",{\"windows\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/it1installer11\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_it\",\"name\":\"Trine 3: The Artifacts of Power (Part 1 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"33 MB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/it1installer12\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_it\",\"name\":\"Trine 3: The Artifacts of Power (Part 2 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"3.7 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/it1patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/it1patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"41 MB\"}],\"mac\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/it2installer1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__it\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-1)\",\"date\":\"\",\"size\":\"3.3 GB\"}],\"linux\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/it3installer2\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__it\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-2)\",\"date\":\"\",\"size\":\"3.3 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/it3patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/it3patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"33 MB\"}]}],[\"norsk\",{\"windows\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/no1installer11\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_no\",\"name\":\"Trine 3: The Artifacts of Power (Part 1 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"33 MB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/no1installer12\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_no\",\"name\":\"Trine 3: The Artifacts of Power (Part 2 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"3.7 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/no1patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/no1patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"41 MB\"}],\"mac\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/no2installer1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__no\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-1)\",\"date\":\"\",\"size\":\"3.3 GB\"}],\"linux\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/no3installer2\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__no\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-2)\",\"date\":\"\",\"size\":\"3.3 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/no3patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/no3patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"33 MB\"}]}],[\"Portugu\\u00eas do Brasil\",{\"windows\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/br1installer11\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_br\",\"name\":\"Trine 3: The Artifacts of Power (Part 1 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"33 MB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/br1installer12\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_br\",\"name\":\"Trine 3: The Artifacts of Power (Part 2 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"3.7 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/br1patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/br1patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"41 MB\"}],\"mac\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/br2installer1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__br\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-1)\",\"date\":\"\",\"size\":\"3.3 GB\"}],\"linux\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/br3installer2\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__br\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-2)\",\"date\":\"\",\"size\":\"3.3 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/br3patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/br3patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"33 MB\"}]}],[\"Suomi\",{\"windows\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/fi1installer11\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_fi\",\"name\":\"Trine 3: The Artifacts of Power (Part 1 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"33 MB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/fi1installer12\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_fi\",\"name\":\"Trine 3: The Artifacts of Power (Part 2 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"3.7 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/fi1patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/fi1patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"41 MB\"}],\"mac\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/fi2installer1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__fi\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-1)\",\"date\":\"\",\"size\":\"3.3 GB\"}],\"linux\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/fi3installer2\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__fi\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-2)\",\"date\":\"\",\"size\":\"3.3 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/fi3patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/fi3patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"33 MB\"}]}],[\"svenska\",{\"windows\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/sv1installer11\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_sv\",\"name\":\"Trine 3: The Artifacts of Power (Part 1 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"33 MB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/sv1installer12\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_sv\",\"name\":\"Trine 3: The Artifacts of Power (Part 2 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"3.7 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/sv1patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/sv1patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"41 MB\"}],\"mac\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/sv2installer1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__sv\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-1)\",\"date\":\"\",\"size\":\"3.3 GB\"}],\"linux\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/sv3installer2\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__sv\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-2)\",\"date\":\"\",\"size\":\"3.3 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/sv3patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/sv3patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"33 MB\"}]}],[\"\\u0440\\u0443\\u0441\\u0441\\u043a\\u0438\\u0439\",{\"windows\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/ru1installer11\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_ru\",\"name\":\"Trine 3: The Artifacts of Power (Part 1 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"33 MB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/ru1installer12\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_ru\",\"name\":\"Trine 3: The Artifacts of Power (Part 2 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"3.7 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/ru1patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/ru1patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"41 MB\"}],\"mac\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/ru2installer1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__ru\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-1)\",\"date\":\"\",\"size\":\"3.3 GB\"}],\"linux\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/ru3installer2\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__ru\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-2)\",\"date\":\"\",\"size\":\"3.3 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/ru3patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/ru3patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"33 MB\"}]}],[\"\\u4e2d\\u6587\",{\"windows\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/cn1installer11\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_cn\",\"name\":\"Trine 3: The Artifacts of Power (Part 1 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"33 MB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/cn1installer12\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_cn\",\"name\":\"Trine 3: The Artifacts of Power (Part 2 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"3.7 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/cn1patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/cn1patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"41 MB\"}],\"mac\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/cn2installer1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__cn\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-1)\",\"date\":\"\",\"size\":\"3.3 GB\"}],\"linux\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/cn3installer2\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__cn\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-2)\",\"date\":\"\",\"size\":\"3.3 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/cn3patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/cn3patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"33 MB\"}]}],[\"\\u65e5\\u672c\\u8a9e\",{\"windows\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/jp1installer11\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_jp\",\"name\":\"Trine 3: The Artifacts of Power (Part 1 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"33 MB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/jp1installer12\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer_win_jp\",\"name\":\"Trine 3: The Artifacts of Power (Part 2 of 2)\",\"version\":\"1.11 build 3091 (gog-6)\",\"date\":\"\",\"size\":\"3.7 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/jp1patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/jp1patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"41 MB\"}],\"mac\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/jp2installer1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__jp\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-1)\",\"date\":\"\",\"size\":\"3.3 GB\"}],\"linux\":[{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/jp3installer2\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/installer__jp\",\"name\":\"Trine 3: The Artifacts of Power\",\"version\":\"1.11 build 3091 (gog-2)\",\"date\":\"\",\"size\":\"3.3 GB\"},{\"manualUrl\":\"\\/downlink\\/trine_3_the_artifacts_of_power\\/jp3patch1\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/jp3patch1\",\"name\":\"Patch 1.11 build 3091\",\"version\":\"\",\"date\":\"\",\"size\":\"33 MB\"}]}]],\"extras\":[{\"manualUrl\":\"\\/downlink\\/file\\/trine_3_the_artifacts_of_power\\/58993\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/58993\",\"name\":\"wallpaper\",\"type\":\"wallpapers\",\"info\":1,\"size\":\"1 MB\"},{\"manualUrl\":\"\\/downlink\\/file\\/trine_3_the_artifacts_of_power\\/58983\",\"downloaderUrl\":\"gogdownloader:\\/\\/trine_3_the_artifacts_of_power\\/58983\",\"name\":\"soundtrack (MP3)\",\"type\":\"audio\",\"info\":1,\"size\":\"62 MB\"}],\"dlcs\":[],\"tags\":[],\"isPreOrder\":false,\"releaseTimestamp\":1440082500,\"messages\":[],\"changelog\":\"\\u003Ch4\\u003EPatch 1.11 build 3091 (27 November 2015)\\u003C\\/h4\\u003E\\n\\u003Ch5\\u003ETechnical\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EFixed rare crash issues\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed out of memory issues if stayed too long in the same level\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed minimum OS X version information from OS X 10.8 to OS X 10.9\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EOptimizations\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EAdded rendering quality logic for OS X and Linux builds (launcher graphical settings now actually changes the looks of the game)\\u003C\\/li\\u003E\\n\\u003Cli\\u003EAdded lots of small optimizations around the engine and gameplay logic\\u003C\\/li\\u003E\\n\\u003Cli\\u003EOptimized Zoya (Thief) grappling hook\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003ERendering\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EFixed Russian font for OS X and Linux\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EOnline Multiplayer\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EFixed issue where boss level fire balls didn\\u0027t work if FPS was too low\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003ELevels\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003ETweaked \\u0026quot;The Quest for Cake\\u0026quot; level (lot\\u0027s of small gameplay issues fixed which were reported by users)\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EGameplay\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003ETweaked Amadeus (Wizard) levitation logic (objects can now be taken as companion even when character is not on ground)\\u003C\\/li\\u003E\\n\\u003Cli\\u003ETweaked Zoya (Thief) grappling hook\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EInput\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EAdded missing selectLevel bind into input menu (you can now configure the enter chapter bind)\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed input issues on OS X when game was started (ALT+TAB \\/ CMD+TAB issue)\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed input issues with Steam on-screen keyboard\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EInfo\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EAll v1.11 (Steam, GOG, Humble and App Store) builds are online multiplayer compatible with this build (check the version number from game\\u0027s main menu)\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Chr \\/\\u003E\\n\\u003Ch4\\u003EPatch 1.10 build 3080 (05 November 2015)\\u003C\\/h4\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EAdded the Linux version of Trine 3: The Artifacts of Power.\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003ELevels\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EAdded a new level \\u0026quot;The Quest for Cake\\u0026quot; !\\u003C\\/li\\u003E\\n\\u003Cli\\u003EAdded similar checkpoint logic to Lost Pages levels than Tutorial levels have, now you can die during the level and continue without restarting the whole level\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed and tweaked lots of small gameplay issues in all levels\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed some broken AI navigation mesh data in various levels\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EGameplay\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EAmadeus (Wizard) accurate or companion levitation cannot be started while not on ground (\\u0026quot;the Wizard box exploit\\u0026quot;)\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed issue where Amadeus (Wizard) could pick up objects with zero input\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed issue where wallhead projectiles cut the Zoya\\u0027s grappling hook\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed issue where ALT+TAB could result missing characters\\u003C\\/li\\u003E\\n\\u003Cli\\u003ETweaked new level indicator in playable map scene\\u003C\\/li\\u003E\\n\\u003Cli\\u003ETweaked Trineangles visual deletion to be instant instead of delayed\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EPlayer characters\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EFixed issue where crouching could cause movement stuck\\u003C\\/li\\u003E\\n\\u003Cli\\u003ETweaked player character skills\\u003C\\/li\\u003E\\n\\u003Cli\\u003ETweaked player wall jumping so that exploiting wouldn\\u0027t occur\\u003C\\/li\\u003E\\n\\u003Cli\\u003ETweaked surface jumps from water (now instant, not delayed)\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003ETechnical\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003ERe-built the game data due to some engine level changes which leads to big update\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed crash issues which could occur when changing characters (rapidly)\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed rare crash issues with physics objects (when physics contact happened)\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed rare crash issue which could occur when levitating objects with Amadeus (Wizard)\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed memory leak issues with AI navigation mesh data\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EOptimizations\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EAdded (minor) optimizations all over the gameplay and engine logic while working on other platforms :)\\u003C\\/li\\u003E\\n\\u003Cli\\u003EBatched model particles to single draw call\\u003C\\/li\\u003E\\n\\u003Cli\\u003EOptimized AI navigation mesh data sizes\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EOnline multiplayer\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EAdded a failsafe logic if online multiplayer game server doesn\\u0027t respond so that game wouldn\\u0027t jam into \\u0026quot;Refreshing...\\u0026quot; window\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed issue where game used Local Area Network (LAN) for online games if GOG login failed\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003ERendering\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EFixed sway which was randomly disabled sometimes\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EGUI\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EFixed loading screen glitching when changing save slots or deleting them\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed missing character when deleting a save slot\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed save slot menu issues (correct localization)\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed duplicate data in level\\u0027s checkpoint menu\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed game console issues (console can be opened from F8 button)\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed incorrect tooltips when using user binds\\u003C\\/li\\u003E\\n\\u003Cli\\u003ETweaked level\\u0027s checkpoint menu (automatically scale to correct size)\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003ECinematics\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EFixed minor issues with the intro cinematic (polished scene, no more holes in the geometry, no more characters running through the walls etc.)\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EInput\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EAdded hardware cursor to be in use by default (can be changed from options.txt, InputModule::OSCursorVisible)\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed console (F8) arrow key issues (left\\/right\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed some rare double input issues with backspace button and input in general)\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed cursor hide\\/show issues when using ALT+TAB\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed cursor hide\\/show issues in general\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed input disabling\\/enabling issues during cinematics\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed Nvidia Shield Controller issues\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EAchievements\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EFixed issue where Trineangle related achievements were only unlocked on level exit, now they are unlocked when last one is collected in a level\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed incorrectly awarded achievements in online multiplayer game\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EStereo 3D\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EFixed Stereo 3D feature available pop up which was missing\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed Trine 3: The Artifacts of Power main menu logo which stuck on screen when Stereo 3D was enabled\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003ESave \\u0026amp; Load\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EFixed end boss issues if player quit the game during the end boss and resumed game later on\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003ELocalization\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EAdded Finnish text localization!\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed issue where missing localization caused game to be unplayable\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed missing Turkish characters\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EEffects\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EFixed infinite looping effects when owner object had been already deleted\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EAudio\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EFixed missing speeches in various levels for all languages\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EPhysX\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003ERe-built PhysX 3.3.3 libraries to fix rare physics issues\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003ELauncher\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EFixed issues where some of the text didn\\u0027t fit to launcher in various languages \\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Chr \\/\\u003E\\n\\u003Ch4\\u003EPatch 1.01 build 3005 (24 August 2015)\\u003C\\/h4\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EHotfix for double cursor and online multiplayer issues\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Chr \\/\\u003E\\n\\u003Ch4\\u003EPatch 1.00 build 2995 (20 August 2015)\\u003C\\/h4\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EAdded full version 1.00\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Chr \\/\\u003E\\n\\u003Ch5\\u003EPatch 0.09 build 2952 (13 July 2015):\\u003C\\/h5\\u003E\\n\\u003Ch5\\u003ETechnical\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EAdded some optimizations\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed some crash issues\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EOnline multiplayer\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EAdded optimizations (mainly bandwidth)\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003ELevels\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EAdded more minor content to various levels\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed and tweaked lots of small gameplay issues in \\u0026quot;The Three Heroes\\u0026quot; level\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed and tweaked lots of small gameplay issues in \\u0026quot;Academy Outskirts\\u0026quot; level\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed and tweaked lots of small gameplay issues in \\u0026quot;The Astral Academy\\u0026quot; level\\u003C\\/li\\u003E\\n\\u003Cli\\u003EFixed and tweaked lots of small gameplay issues in Challenge levels\\u003C\\/li\\u003E\\n\\u003Cli\\u003ETweaked cinematics in various levels\\u003C\\/li\\u003E\\n\\u003Cli\\u003ETweaked \\u0026quot;Trineangles\\u0026quot; locations in all levels\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EGameplay\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003ETweaked player character skills\\u003C\\/li\\u003E\\n\\u003Cli\\u003ETweaked the new player re-spawn system and spirits (still work in progress!)\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EEffects\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EAdded new effects to various gameplay elements and cinematics\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EAudio\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EAdded new audio effects to various levels, gameplay elements and cinematics\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EGUI\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EReworked some of the menu and GUI graphics\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EInfo\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EWhen reporting bugs, please always state game\\u0027s version number and build number. Check the version number from game\\u0027s main menu.\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\\n\\u003Ch5\\u003EList of Known Issues\\u003C\\/h5\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003EOnline Multiplayer doesn\\u0027t have sound if Voice Chat is enabled. You can disable it from %appdata%\\/Trine3\\/options.txt\\u003C\\/li\\u003E\\n\\u003Cli\\u003EPublic Editor might have issues if you try to install new version into old versions install folder (also hundreds of pop ups might appear).\\u003C\\/li\\u003E\\n\\u003C\\/ul\\u003E\",\"forumLink\":\"https:\\/\\/www.gog.com\\/forum\\/trine_series\",\"isBaseProductMissing\":false,\"missingBaseProduct\":null}";
            //var gd = Deserialize(data);
        }

        protected override string GetRequestTemplate()
        {
            return Uris.Paths.Account.GameDetailsTemplate;
        }

        protected override GameDetails Deserialize(string data)
        {
            // GameDetails are complicated as GOG.com currently serves mixed type array
            // where first entry is string "Language" and next entries are downloads
            // so in order to overcome this we do it like this:
            // 1) extract downloads substring from the raw JSON
            // 2) deserialize 
            // 3) for each language we expand second collection item (that is operating system downloads)
            // 4) for each DLC we recursively expand DynamicDownloads
            // 5) we nullify DynamicDownloads after expansion to allow further serialization

            // extract downloads strings...

            var downloadStrings = new List<string>();

            while (gameDetailsDownloadsController.ContainsLanguageDownloads(data))
            {
                var downloadString = gameDetailsDownloadsController.ExtractSingle(data);
                downloadStrings.Add(downloadString);
                // ...and sanitize it from original string
                data = gameDetailsDownloadsController.SanitizeSingle(data, downloadString);
            }

            // deserialize game details object without downloads information
            GameDetails gameDetails = stringDeserializeController.Deserialize<GameDetails>(data);

            gameDetails.LanguageDownloads = new List<OperatingSystemsDownloads>();

            if (gameDetails == null)
                throw new InvalidOperationException("Cannot deserialize game details.");

            // now we can proceed downloads strings
            // extract the languages that are used as first element in each array...
            foreach (var downloadString in downloadStrings)
            {

                var languages = gameDetailsDownloadsController.ExtractMultiple(downloadString);
                if (languages == null)
                    throw new InvalidOperationException("Download string doesn't seem to contain languages. Please check if GOG.com changed JSON data format.");

                // ... and sanitize lanugage strings from downloads
                var sanitizedDownloadsString =
                    gameDetailsDownloadsController.SanitizeMultiple(
                    downloadString, languages);

                // now it should be safe to deserialize langugage downloads
                var downloads =
                    stringDeserializeController.Deserialize<OperatingSystemsDownloads[][]>(
                    sanitizedDownloadsString);

                // and convert GOG multidimensional array of downloads to linear list
                gameDetails.LanguageDownloads.AddRange(gameDetailsDownloadsController.ExtractLanguageDownloads(
                    downloads,
                    languages,
                    requestedLanguages));
            }

            return gameDetails;
        }
    }
}
